define(['jquery','uiComponent',],function($,Component){var globalContainerObj=$('body > .global'),globalContainerObjHeight=globalContainerObj.height(),globalInsideNotice='.global.inside-notice';return Component.extend({initialize:function(){this._bindEvents();},_bindEvents:function(){var _this=this;$(window).on('resize',function(){_this.initVpProp();setTimeout(function(){_this.setPageWrapperHeight();},1000);});$('.header.content .nav-toggle').on('click',function(){_this.initVpProp();setTimeout(function(){_this.setPageWrapperHeight();if(globalContainerObj.length&&globalContainerObj.is(':visible')){$('.header.content .nav-sections').slideDown(500,function(){$('.header.content .nav-sections').css({'margin-top':globalContainerObjHeight});});}},1000);});$('.header.content .nav-sections .close-menu-item-container').on('click',function(){_this.setPageWrapperHeight();});$(document).on('click',function(e){if(window.innerWidth>1023){if($(e.target).parents('.sidebar').length<1&&$('.sidebar').find('.filter').hasClass('active')){$('.sidebar.sidebar-main > .block.filter > .filter-title strong .close-box').trigger('click');}}});$('.sidebar.sidebar-main > .block.filter > .filter-title strong').on('click',function(){_this.initVpProp();if(globalContainerObj.length&&window.innerWidth<=1023){if($(this).closest('.block.filter').hasClass('active')){globalContainerObj.addClass('hide');_this.resetHeaderPosition();_this.resetSidebarPosition();}else{globalContainerObj.removeClass('hide');}}});},initVpProp:function(){var _this=this;if(globalContainerObj.length&&globalContainerObj.is(':visible')){if(window.innerWidth<=1023){_this.adjustHeaderMenuPosition();_this.adjustSidebarPosition();if($(globalInsideNotice).hasClass('private-notices')){$('.global.inside-notice.private-notices').css('position','');}else{$(globalInsideNotice).not('.private-notices').attr({'style':''});}
$('.page-wrapper').attr({'style':''});}else{_this.resetHeaderPosition();_this.resetSidebarPosition();}}else{if(window.innerWidth<=1023&&!$('#layered-filter-block').hasClass('active')){_this.resetHeaderPosition();_this.resetSidebarPosition();}}},adjustHeaderMenuPosition:function(){if(globalContainerObj.length&&globalContainerObj.is(':visible')){$('.header.content').addClass('vpAction');$('.header.content.vpAction .nav-sections').css({'margin-top':globalContainerObj.height(),'height':'calc(100% - '+(globalContainerObj.height())+'px)'});setTimeout(function(){$('.sidebar.sidebar-main').trigger('scroll');},100);}},adjustSidebarPosition:function(){$('.sidebar.sidebar-main').addClass('vpAction');$('.sidebar.sidebar-main.vpAction .filter .filter-title').css('top',globalContainerObj.height());$('.sidebar.sidebar-main.vpAction .filter .filter-subtitle').css('top',globalContainerObj.height());$('.sidebar.sidebar-main.vpAction .filter .filter-options').css('top',globalContainerObj.height()+11+$('.sidebar.sidebar-main.vpAction .filter .filter-title').height());},resetHeaderPosition:function(){$('.header.content.vpAction').removeClass('vpAction');$('.header.content .nav-sections').css({'margin-top':0});setTimeout(function(){$('.sidebar.sidebar-main').trigger('scroll');},100);if(window.innerWidth>1023){$('.page-wrapper').attr({'style':''});}},resetSidebarPosition:function(){$('.sidebar.sidebar-main.vpAction').removeClass('vpAction');$('.sidebar.sidebar-main .filter .filter-title').attr({'style':''});$('.sidebar.sidebar-main .filter .filter-subtitle').attr({'style':''});$('.sidebar.sidebar-main .filter .filter-options').attr({'style':''});},setPageWrapperHeight:function(){if(globalContainerObj.length&&globalContainerObj.is(':visible')){if(window.innerWidth<=1023){if($('html').hasClass('nav-open')){$('.nav-open .global.inside-notice').not('.private-notices').css({'position':'fixed','z-index':9999});$('.nav-open .page-wrapper').css({'height':'calc(100% - '+globalContainerObj.height()+'px)','position':'relative','top':globalContainerObj.height()+'px'});var vpPropHeight=globalContainerObj.height(),afterHeight='calc(100% - '+vpPropHeight+'px)';if($('.nav-open .nav-toggle i#navToggleAfterStyle').length){$('.nav-open .nav-toggle i#navToggleAfterStyle').remove();}
$('.nav-open .nav-toggle').append('<i id="navToggleAfterStyle">'+'<style>'+'.nav-open .nav-toggle:after {'+'top: '+vpPropHeight+'px;'+'height: '+afterHeight+'}'+'</style>'+'</i>');}else{if($(globalInsideNotice).length>1){if($(globalInsideNotice).hasClass('private-notices')){$('.global.inside-notice.private-notices').css('position','');}else{$(globalInsideNotice).first().attr({'style':''});}}else{if($(globalInsideNotice).hasClass('private-notices')){$('.global.inside-notice.private-notices').css('position','');}else{$(globalInsideNotice).first().attr({'style':''});}}
$('.page-wrapper').attr({'style':''});}}}else{if(window.innerWidth<=1023){$('.page-wrapper').attr({'style':''});}}}});});