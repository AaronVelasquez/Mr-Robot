require(['jquery','Magento_Ui/js/modal/modal','Magento_Ui/js/model/messageList','mage/translate','mage/validation'],function($,modal,messageList){'use strict';var oosNotifyRegisterForm=$('#oos-notify-register-form'),oosNotifyEmail=$('#oos_notify_email'),options={type:'popup',responsive:true,innerScroll:true,modalClass:'catalog-product-oos-notify-popup',id:'',url:'',message:$.mage.__('The user already has an active reminder for this product, Please do not repeat registration.'),buttons:[{text:$.mage.__('CANCEL'),class:'oos-notify-register cancel-button',click:function(event){this.closeModal(event);}},{text:$.mage.__('REGISTER ALERT'),class:'oos-notify-register register-button',click:function(event){var _self=this;if(oosNotifyRegisterForm.validation()&&oosNotifyRegisterForm.validation('isValid')){let fields=oosNotifyRegisterForm.serializeArray(),f={};$.each(fields,function(index,field){f[field.name]=field.value;});f['id']=options.id;$.ajaxSetup({showLoader:true});$.post(options.url,f).done(function(response){if(response.status==='success'){_self.closeModal(event);}
if(response.status==='failure'){$('.oos-notify-error-message').empty();$('.oos-notify-error-message').append(options.message);setTimeout(function(){$('.oos-notify-error-message').empty();},5000);}});}}}]};$(function(){var pdpNotifyPopup=$('.pdp.oos-notify-popupButton');if(!$('#product-addtocart-button').size()&&pdpNotifyPopup.css('display')==='none'){pdpNotifyPopup.css('display','block');}});function oosPop(dom){options.id=dom.data('id');options.url=dom.data('url');if(dom.is('span')){options.id=dom.closest('button').data('id');options.url=dom.closest('button').data('url');}
modal(options,$('#oos-notify-register'));$('#oos-notify-register').modal('openModal');}
$(document).off('click','.oos-notify-popupButton').on('click','.oos-notify-popupButton',function(){oosPop($(this));});oosNotifyEmail.closest('.field').on('mouseenter',function(){if(oosNotifyEmail.attr('disabled')!=='disabled'){oosNotifyEmail.closest('.field').addClass('_active');}}).on('blur',function(){oosNotifyEmail.closest('.field').removeClass('_active');if(!oosNotifyEmail.val()&&oosNotifyEmail.hasClass('mage-error')){oosNotifyEmail.parent('.control').find('.icon.error-validation-icon').remove();oosNotifyEmail.removeClass('mage-error');oosNotifyEmail.parent('.control').find('.mage-error').remove();}}).on('mouseleave',function(){if(!oosNotifyEmail.is(':focus')){if(!oosNotifyEmail.val()){oosNotifyEmail.parents('.field').removeClass('_active');}}}).on('focus',function(){oosNotifyEmail.closest('.field').addClass('_active');});function floatingLabelInteractive(){var floatContainer=$(this).closest('.field');if($(this).val()!==''){floatContainer.addClass('_active');}else{floatContainer.removeClass('_active');}
oosNotifyRegisterForm.validation()&&oosNotifyRegisterForm.validation('isValid');$(this).prev('i').remove();if($(this).hasClass('mage-error')){$(this).siblings('i').remove();$(this).before('<i class="icon error-validation-icon"></i>');}
if($(this).hasClass('valid')){$(this).siblings('i').remove();$(this).before('<i class="icon pass-validation-icon"></i>');}}
oosNotifyEmail.on('each',floatingLabelInteractive).on('focus',function(){$(this).closest('.field').addClass('_active');}).on('blur change',floatingLabelInteractive);});